import{_ as L}from"./GoBackNavLink-7cf44a59.js";import{K as O,a as p,b as N,f as d,y as F,n as V,o as j,c as Y,d as l,u as t,_ as a,Z as z,e,t as n,g as x,h as o,F as M,l as E,i as R}from"./app-7572aa5b.js";import{_ as U}from"./EmployeeTabs-ff9d7606.js";import{_ as $}from"./FlexButton-7972ceb1.js";import{a as q}from"./index-7c45f06a.js";import{_ as k}from"./Card-ef6bc490.js";import{M as C}from"./ModifyIcon-dff0bf02.js";import{D as I,_ as f,a as m,b as c}from"./DD-9ad71c33.js";import{_ as v}from"./GenericModal-190b3b09.js";import{_ as H,a as _}from"./TableHead-c5407f53.js";import{_ as y}from"./TableBody-b8cb2c93.js";import{T as P}from"./TableRow-48354286.js";import{_ as G}from"./ToolTip-546ac067.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Paginator-fff81934.js";function K(){function s(i){const g={year:"numeric",month:"long",day:"numeric"},h=1800+(parseInt(i.charAt(0))-1)*100+parseInt(i.substr(1,2)),b=parseInt(i.substr(3,2)),u=parseInt(i.substr(5,2)),r=i.substr(7,2),A={"01":"القاهرة","02":"الإسكندرية","03":"بورسعيد","04":"السويس",11:"دمياط",12:"الدقهلية",13:"الشرقية",14:"القليوبية",15:"كفر الشيخ",16:"الغربية",17:"المنوفية",18:"البحيرة",19:"الإسماعيلية",21:"الجيزة",22:"بني سويف",23:"الفيوم",24:"المنيا",25:"أسيوط",26:"سوهاج",27:"قنا",28:"أسوان",29:"الأقصر",31:"البحر الأحمر",32:"الوادي الجديد",33:"مطروح",34:"شمال سيناء",35:"جنوب سيناء",88:"خارج الجمهورية"}[r],T=parseInt(i.charAt(12))%2!==0,B=new Date(h,b-1,u);return{year:h,month:b,day:u,date:B.toLocaleDateString("en-uk",g),date_localized:B.toLocaleDateString(O().props.locale,g),state:A,isMale:T}}return{extractPersonalDetails:s}}const W={class:"overflow-hidden sm:rounded-lg"},Z={class:V("grid grid-cols-2")},J={__name:"HistoryDescriptionList",props:{},setup(s){return(i,g)=>(p(),N("div",W,[d("dl",null,[d("div",Z,[F(i.$slots,"default")])])]))}};function Q(s){const i=new Date(s),g=new Date;let S=g.getFullYear()-i.getFullYear();return(g.getMonth()<i.getMonth()||g.getMonth()===i.getMonth()&&g.getDate()<i.getDate())&&S--,Math.abs(S)}const X={class:"py-8"},ee={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},le={class:"flex justify-between items-center mb-4"},te={class:"card-header"},ae={class:"flex inline-flex gap-4"},ne={class:"card-subheader"},oe=["href"],se=["href"],ue=["href"],de={class:"mb-2 ml-1 font-semibold"},ie={class:"mb-2 ml-1 font-semibold"},re={class:"test"},fe=["href"],me={class:"mb-2 ml-1 font-semibold"},ce={class:"px-4 py-3.5"},_e={class:"text-sm font-medium"},ye={class:"test"},he={class:"px-4 py-3.5"},pe={class:"text-sm font-medium"},ge={class:"px-4 py-3.5"},be={class:"text-sm font-medium"},Te={__name:"EmployeeView",props:{employee:Object},setup(s){const i=s;let{extractPersonalDetails:g}=K();j(()=>{q()});const S=h=>{if(!h)return a("N/A");const b=new Date,r=new Date(h)-b;return r>0?Math.ceil(r/(1e3*60*60*24)):a("Expired")},w=Y(()=>{const h=i.employee.manages.map(({department_id:D,branch_id:A})=>({department_id:D,branch_id:A})).filter(({department_id:D,branch_id:A})=>D!==null||A!==null),b=h.map(({branch_id:D})=>D).filter(Boolean).join(", "),u=h.map(({department_id:D})=>D).filter(Boolean).join(", ");let r="";return b!==""&&(r+=a("Branches")+`: #${b}`),u!==""&&(r!==""&&(r+=" - "),r+=a("Departments")+`: #${u}`),r});return(h,b)=>(p(),N(M,null,[l(t(z),{title:t(a)("Employee View")},null,8,["title"]),l(L,null,{tabs:e(()=>[l(U)]),default:e(()=>[d("div",X,[d("div",ee,[l(k,{class:"!mt-0"},{default:e(()=>[d("div",le,[d("h1",te,n(t(a)("Employee View :ifAdmin",{ifAdmin:i.employee.manages.length>0?"("+t(a)("Manager")+")":""})),1),d("div",ae,[h.$page.props.auth.user.roles.includes("admin")?(p(),x($,{key:0,text:t(a)("Modify Employee Data"),href:h.route("employees.edit",{id:s.employee.id})},{default:e(()=>[l(C)]),_:1},8,["text","href"])):(p(),x($,{key:1,text:t(a)("Modify Data"),href:h.route("profile.edit",{id:s.employee.id})},{default:e(()=>[l(C)]),_:1},8,["text","href"]))])]),d("h2",ne,n(t(a)("Basic Info")),1),l(I,null,{default:e(()=>[l(f,{colored:""},{default:e(()=>[l(m,null,{default:e(()=>[o(n(t(a)("Name")),1)]),_:1}),l(c,null,{default:e(()=>[o(n(s.employee.name),1)]),_:1})]),_:1}),l(f,{colored:""},{default:e(()=>[l(m,null,{default:e(()=>[o(n(t(a)("ID")),1)]),_:1}),l(c,null,{default:e(()=>[o(n(s.employee.id),1)]),_:1})]),_:1}),l(f,null,{default:e(()=>[l(m,null,{default:e(()=>[o(n(t(a)("Phone")),1)]),_:1}),l(c,null,{default:e(()=>[d("a",{href:"tel:"+s.employee.phone},n(s.employee.phone),9,oe)]),_:1})]),_:1}),l(f,null,{default:e(()=>[l(m,null,{default:e(()=>[o(n(t(a)("National ID")),1)]),_:1}),l(c,null,{default:e(()=>[o(n(s.employee.national_id),1)]),_:1})]),_:1}),l(f,{colored:""},{default:e(()=>[l(m,null,{default:e(()=>[o(n(t(a)("Email")),1)]),_:1}),l(c,null,{default:e(()=>[d("a",{href:"mailto:"+s.employee.email},n(s.employee.email),9,se)]),_:1})]),_:1}),l(f,{colored:""},{default:e(()=>[l(m,null,{default:e(()=>[o(n(t(a)("Gender")),1)]),_:1}),l(c,null,{default:e(()=>[o(n(t(g)(s.employee.national_id).isMale?t(a)("Male"):t(a)("Female")),1)]),_:1})]),_:1}),l(f,null,{default:e(()=>[l(m,null,{default:e(()=>[o(n(t(a)("Bank Account Details")),1)]),_:1}),l(c,null,{default:e(()=>[o(n(s.employee.bank_acc_no??t(a)("N/A")),1)]),_:1})]),_:1}),l(f,null,{default:e(()=>[l(m,null,{default:e(()=>[o(n(t(a)("Birthday")),1)]),_:1}),l(c,null,{default:e(()=>[o(n(t(g)(s.employee.national_id).date_localized+" - "+t(Q)(t(g)(s.employee.national_id).date)+" "+t(a)("Years")),1)]),_:1})]),_:1}),l(f,{colored:""},{default:e(()=>[l(m,null,{default:e(()=>[o(n(t(a)("Hire Date")),1)]),_:1}),l(c,null,{default:e(()=>[o(n(s.employee.hired_on),1)]),_:1})]),_:1}),l(f,{colored:""},{default:e(()=>[l(m,null,{default:e(()=>[o(n(t(a)("Remote Worker?")),1)]),_:1}),l(c,null,{default:e(()=>[o(n(i.employee.is_remote?t(a)("Yes"):t(a)("No")),1)]),_:1})]),_:1}),l(f,null,{default:e(()=>[l(m,null,{default:e(()=>[o(n(t(a)("Address")),1)]),_:1}),l(c,null,{default:e(()=>[d("a",{href:"https://www.google.com/maps/search/?api=1&query="+i.employee.address,target:"”_blank”"},n(s.employee.address),9,ue)]),_:1})]),_:1})]),_:1})]),_:1}),l(k,null,{default:e(()=>[d("h2",de,n(t(a)("Technical Info")),1),l(I,null,{default:e(()=>[l(f,{colored:""},{default:e(()=>[l(m,null,{default:e(()=>[o(n(t(a)("Branch")),1)]),_:1}),l(c,null,{default:e(()=>[o(n(s.employee.branch_name??t(a)("N/A")),1)]),_:1})]),_:1}),l(f,{colored:""},{default:e(()=>[l(m,null,{default:e(()=>[o(n(t(a)("Department")),1)]),_:1}),l(c,null,{default:e(()=>[o(n(s.employee.department_name??t(a)("N/A")),1)]),_:1})]),_:1}),l(f,null,{default:e(()=>[l(m,null,{default:e(()=>[o(n(t(a)("Salary")),1)]),_:1}),l(c,null,{default:e(()=>[o(n(s.employee.salaries[s.employee.salaries.length-1].salary.toLocaleString()+" "+s.employee.salaries[s.employee.salaries.length-1].currency),1)]),_:1})]),_:1}),l(f,null,{default:e(()=>[l(m,null,{default:e(()=>[o(n(t(a)("Position")),1)]),_:1}),l(c,null,{default:e(()=>{var u;return[o(n(s.employee.employee_positions.length===0?t(a)("N/A"):((u=s.employee.employee_positions[s.employee.employee_positions.length-1].position)==null?void 0:u.name)??t(a)("N/A")),1)]}),_:1})]),_:1}),l(f,{colored:""},{default:e(()=>[l(m,null,{default:e(()=>[o(n(t(a)("Shift")),1)]),_:1}),l(c,null,{default:e(()=>[o(n(s.employee.employee_shifts.length===0?t(a)("N/A"):s.employee.employee_shifts.filter(u=>u.end_date===null).map(u=>{var r;return(r=u.shift)==null?void 0:r.name})[0]??t(a)("N/A")),1)]),_:1})]),_:1}),l(f,{colored:""},{default:e(()=>[l(m,null,{default:e(()=>[o(n(t(a)("Access Permissions")),1)]),_:1}),l(c,null,{default:e(()=>[o(n(s.employee.roles.length===0?t(a)("Not Assigned"):s.employee.roles[s.employee.roles.length-1].name.replace(/_/g," ").replace(/\b\w/g,u=>u.toUpperCase())),1)]),_:1})]),_:1}),l(f,null,{default:e(()=>[l(m,null,{default:e(()=>[o(n(t(a)("Manages"))+" ",1),l(G,{direction:"top"},{default:e(()=>[o(n(t(a)("IDs of the branches and/or departments that this employee manages, if any.")),1)]),_:1})]),_:1}),l(c,null,{default:e(()=>[o(n(i.employee.manages.length>0?w.value:t(a)("Nothing")),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(k,null,{default:e(()=>[d("h2",ie,n(t(a)("Employee Documents")),1),l(H,{totalNumber:1,enablePaginator:!1},{Head:e(()=>[l(_,null,{default:e(()=>[o(n(t(a)("Document Name")),1)]),_:1}),l(_,null,{default:e(()=>[o(n(t(a)("Expiry Date")),1)]),_:1}),l(_,null,{default:e(()=>[o(n(t(a)("Days Left Until Expire")),1)]),_:1}),l(_,null,{default:e(()=>[o(n(t(a)("Action")),1)]),_:1})]),Body:e(()=>[(p(!0),N(M,null,E(s.employee.documents,u=>(p(),x(P,{key:u.id},{default:e(()=>[l(y,null,{default:e(()=>[o(n(u.document_name),1)]),_:2},1024),l(y,null,{default:e(()=>[o(n(u.expiration_date??t(a)("No Expiry")),1)]),_:2},1024),l(y,null,{default:e(()=>[o(n(S(u.expiration_date)),1)]),_:2},1024),d("td",null,[d("a",{href:h.route("downloadDocument",{fileName:u.file_path}),target:"_blank",class:"font-medium text-purple-600 dark:text-purple-500 hover:underline"},n(t(a)("View")),9,fe)])]),_:2},1024))),128))]),default:e(()=>[d("p",re,n(s.employee.salaries),1)]),_:1}),!s.employee.documents||!s.employee.documents.length?(p(),x(P,{key:0},{default:e(()=>[l(y,{class:"text-center"},{default:e(()=>[o(n(t(a)("No documents available")),1)]),_:1})]),_:1})):R("",!0)]),_:1}),l(k,null,{default:e(()=>[d("h2",me,n(t(a)("History")),1),l(J,null,{default:e(()=>[d("div",ce,[d("dt",_e,n(t(a)("Previous Salaries")),1),l(v,{modalId:"Salaries Modal",title:t(a)("Click Here To See Salary History"),modalHeader:t(a)("Previous Salaries"),hasCancel:!1},{default:e(()=>[l(H,{totalNumber:1,enablePaginator:!1},{Head:e(()=>[l(_,null,{default:e(()=>[o(n(t(a)("Currency")),1)]),_:1}),l(_,null,{default:e(()=>[o(n(t(a)("Salary")),1)]),_:1}),l(_,null,{default:e(()=>[o(n(t(a)("Starting From")),1)]),_:1}),l(_,null,{default:e(()=>[o(n(t(a)("Ending At")),1)]),_:1})]),Body:e(()=>[(p(!0),N(M,null,E(s.employee.salaries,u=>(p(),x(P,{key:u.id},{default:e(()=>[l(y,null,{default:e(()=>[o(n(u.currency),1)]),_:2},1024),l(y,null,{default:e(()=>[o(n(u.salary),1)]),_:2},1024),l(y,null,{default:e(()=>[o(n(u.start_date),1)]),_:2},1024),l(y,null,{default:e(()=>[o(n(u.end_date??t(a)("Current")),1)]),_:2},1024)]),_:2},1024))),128))]),default:e(()=>[d("p",ye,n(s.employee.salaries),1)]),_:1})]),_:1},8,["title","modalHeader"])]),d("div",he,[d("dt",pe,n(t(a)("Previous Positions")),1),l(v,{modalId:"Positions Modal",title:t(a)("Click Here To See Positions History"),modalHeader:t(a)("Previous Positions"),hasCancel:!1},{default:e(()=>[l(H,{totalNumber:1,enablePaginator:!1},{Head:e(()=>[l(_,null,{default:e(()=>[o(n(t(a)("Position")),1)]),_:1}),l(_,null,{default:e(()=>[o(n(t(a)("Starting From")),1)]),_:1}),l(_,null,{default:e(()=>[o(n(t(a)("Ending At")),1)]),_:1})]),Body:e(()=>[(p(!0),N(M,null,E(s.employee.employee_positions,u=>(p(),x(P,{key:u.id},{default:e(()=>[l(y,null,{default:e(()=>{var r;return[o(n(((r=u.position)==null?void 0:r.name)??t(a)("DELETED POSITION")),1)]}),_:2},1024),l(y,null,{default:e(()=>[o(n(u.start_date),1)]),_:2},1024),l(y,null,{default:e(()=>[o(n(u.end_date??t(a)("Current")),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["title","modalHeader"])]),d("div",ge,[d("dt",be,n(t(a)("Previous Shifts")),1),l(v,{modalId:"Shifts Modal",title:t(a)("Click Here To See Shifts History"),modalHeader:t(a)("Previous Shifts"),hasCancel:!1},{default:e(()=>[l(H,{totalNumber:1,enablePaginator:!1},{Head:e(()=>[l(_,null,{default:e(()=>[o(n(t(a)("Shift")),1)]),_:1}),l(_,null,{default:e(()=>[o(n(t(a)("Starting From")),1)]),_:1}),l(_,null,{default:e(()=>[o(n(t(a)("Ending At")),1)]),_:1})]),Body:e(()=>[(p(!0),N(M,null,E(s.employee.employee_shifts,u=>(p(),x(P,{key:u.id},{default:e(()=>[l(y,null,{default:e(()=>{var r;return[o(n(((r=u.shift)==null?void 0:r.name)??t(a)("DELETED SHIFT")),1)]}),_:2},1024),l(y,null,{default:e(()=>[o(n(u.start_date),1)]),_:2},1024),l(y,null,{default:e(()=>[o(n(u.end_date??t(a)("Current")),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["title","modalHeader"])])]),_:1})]),_:1})])])]),_:1})],64))}};export{Te as default};
